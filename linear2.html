<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Linear Function Explorer</title>

<style>
  body {
    font-family: Arial, sans-serif;
    padding: 16px;
    max-width: 800px;
    margin: auto;
  }

  #formula {
    font-size: 22px;
    margin-bottom: 12px;
    text-align: center;
  }

  canvas {
    border: 1px solid #ccc;
    width: 100%;
    height: auto;
    touch-action: none;
  }

  .slider-block {
    margin: 16px 0;
  }

  .slider-container {
    position: relative;
    width: 100%;
  }

  input[type=range] {
    width: 100%;
  }

  .marks {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    margin-top: 4px;
  }

  .label {
    font-weight: bold;
    margin-bottom: 4px;
  }
</style>
</head>
<body>

<div id="formula">y = 1·x + 0</div>

<div class="slider-block">
  <div class="label">s (slope): <span id="sVal">1</span></div>
  <div class="slider-container">
    <input type="range" id="s" min="-5" max="5" step="0.1" value="1">
    <div class="marks">
      <span>-1</span>
      <span>0</span>
      <span>1</span>
    </div>
  </div>
</div>

<div class="slider-block">
  <div class="label">i (intercept): <span id="iVal">0</span></div>
  <input type="range" id="i" min="-10" max="10" step="0.5" value="0">
</div>

<canvas id="graph" width="600" height="400"></canvas>

<script>
const canvas = document.getElementById("graph");
const ctx = canvas.getContext("2d");

const sSlider = document.getElementById("s");
const iSlider = document.getElementById("i");
const sVal = document.getElementById("sVal");
const iVal = document.getElementById("iVal");
const formula = document.getElementById("formula");

let scale = 30;

function resizeCanvas() {
  const rect = canvas.getBoundingClientRect();
  canvas.width = rect.width * window.devicePixelRatio;
  canvas.height = rect.width * 0.66 * window.devicePixelRatio;
  ctx.setTransform(window.devicePixelRatio, 0, 0, window.devicePixelRatio, 0, 0);
  draw();
}

function toCanvasX(x) {
  return canvas.width / 2 / devicePixelRatio + x * scale;
}

function toCanvasY(y) {
  return canvas.height / 2 / devicePixelRatio - y * scale;
}

function drawAxes() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.strokeStyle = "#aaa";
  ctx.lineWidth = 1;

  ctx.beginPath();
  ctx.moveTo(0, canvas.height / 2 / devicePixelRatio);
  ctx.lineTo(canvas.width / devicePixelRatio, canvas.height / 2 / devicePixelRatio);
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(canvas.width / 2 / devicePixelRatio, 0);
  ctx.lineTo(canvas.width / 2 / devicePixelRatio, canvas.height / devicePixelRatio);
  ctx.stroke();
}

function drawDottedGuides() {
  ctx.setLineDash([6, 6]);
  ctx.strokeStyle = "#777";

  ctx.beginPath();
  ctx.moveTo(toCanvasX(-10), toCanvasY(-10));
  ctx.lineTo(toCanvasX(10), toCanvasY(10));
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(toCanvasX(-10), toCanvasY(10));
  ctx.lineTo(toCanvasX(10), toCanvasY(-10));
  ctx.stroke();

  ctx.setLineDash([]);
}

function drawLine(s, i) {
  ctx.strokeStyle = "black";
  ctx.lineWidth = 2;
  ctx.beginPath();

  const width = canvas.width / devicePixelRatio;

  for (let px = 0; px <= width; px++) {
    const x = (px - width / 2) / scale;
    const y = s * x + i;
    const py = toCanvasY(y);

    if (px === 0) ctx.moveTo(px, py);
    else ctx.lineTo(px, py);
  }

  ctx.stroke();
}

function updateFormula(s, i) {
  formula.textContent = `y = ${s}·x + ${i}`;
}

function draw() {
  const s = parseFloat(sSlider.value);
  const i = parseFloat(iSlider.value);

  sVal.textContent = s;
  iVal.textContent = i;

  updateFormula(s, i);
  drawAxes();
  drawDottedGuides();
  drawLine(s, i);
}

sSlider.addEventListener("input", draw);
iSlider.addEventListener("input", draw);
window.addEventListener("resize", resizeCanvas);

resizeCanvas();
</script>

</body>
</html>
